

# yyx-wx-commons 公众号公用模块

## 模块说明
> 该模块主要是将一些公共的实体类、配置、常量、异常类以及工具类等整合到了一起，避免重复写代码～

## 模块目录结构

```java
|-org.yyx.wx.commons·····························外层包
|	|
|	|-bussinessenum······························用于存放枚举类的包
|	|
|	|-condition··································用于存放条件加载配置类的包
|	|	|
|	|	|-cache··································用于存放加载哪个缓存的Condition
|	|   |
|	|-config·····································用于存放配置类的包
|	|
|	|-constant···································用于存放常量类的包
|	|
|	|-exception··································用于存放自定义异常的包
|	|	|
|	|	|-handler································用于存放消息事件处理器异常的包
|	|	|
|	|	|-proxy··································用于存放代理异常的包
|	|   |
|	|-impl·······································用于存放各种实现类的包
|	|
|	|-util·······································用于存放工具类的包
|	|
|	|-vo·········································用于存放与微信对接的实体类
|	|	|
|	|	|-pubnum·································用于存放与公众号相关的实体类
|	|	|	|
|	|	|	|-request····························用于存放微信服务端请求到开发服务器的实体类
|	|	|	|	|
|	|	|	|	|-auth···························用于存放与用户认证相关的实体类
|	|	|	|	|
|	|	|	|	|-event··························用于存放事件类推送实体类
|	|	|	|	|
|	|	|	|	|-message························用于存放消息类推送实体类
|	|	|	|	|
|	|	|	|	|-qrcode·························用于存放二维码相关的实体类
|	|	|	|	|
|	|	|	|-response···························用于存放响应给微信服务端的实体类
|	|	|	|	|
|	|	|	|	|-message························用于存放响应给微信服务端的消息实体类
|	|	|	|	|
|	|	|	|	|-model··························用于存放响应给微信服务端的模板消息实体类
```

## 模块功能

### 缓存

> 缓存目前支持Redis缓存与Map伪缓存

#### Redis

最外层的spring配置文件需要配置spring.redis.host或者spring.redis.port两者中的任意一项。只有配置了，才会激活Redis缓存，否则以Map作为缓存，并没有持久化机制。

目前不支持使用别个缓存方式。

Redis缓存实现了CacheService接口。使用RedisTemplate实现。

#### Map

最外层的spring配置文件如果没有配置spring.redis.host或者spring.redis.port两者中的任意一项，当前项目会自动启用Map来作为临时缓存。

### 工具

#### InterfaceUtil

> 主要功能是查询一个接口的所有实现类。

此工具类为了实现动态注入自定义消息、事件处理器而生，当系统中没有任何消息处理器或者事件处理器时，系统会自动选择默认的消息或者事件处理器。

**ps**

自定义消息处理器和事件处理器请实现message模块下的对应的处理器代理。此项详见message模块

#### WxXmlAndObjectUtil

> 针对微信公众号返回的数据写的xml与object转换的工具类

此工具类为了实现将公众号请求到开发者服务器的数据转换为系统中的实体类以及将系统中响应给公众号的实体类转换为公众号认可的xml格式而生。